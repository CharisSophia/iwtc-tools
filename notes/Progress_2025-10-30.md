---
title: IWTC-Lab Progress Report - October 30, 2025
author: Charis Sophia
project: Iron Wolf Trading Company / IWTC-Lab
version: 0.1
repository: https://github.com/CharisSophia/iwtc-lab
---

# IWTC-Lab Progress Report - October 30, 2025

## [Project Summary]
This milestone marks the establishment of a fully functional local IWTC-Lab development environment with integrated SRD data, working dice and roll mechanics, and a modular Jupyter notebook framework for demonstration and testing.

---

## 1. Environment & Tooling
- Installed **Python 3.11** and configured **Jupyter Lab** on macOS Big Sur.
- Created an isolated virtual environment (`.venv`) and linked it as the Jupyter kernel.
- Established clean import path management via `IWTC_ROOT` and `sys.path`.
- Added a robust **Bootstrap section**:
  - Ensures consistent paths, imports, and virtual environment setup.
  - Verifies `lib/` and `data/srd/` presence and accessibility.

**Key Learning:**  
Importing from `lib` requires adding the **project root** to `sys.path`, not the `lib` directory itself.

---

## 2. Repository & Structure
- Initialized the **iwtc-lab** Git repository.
- Defined clean, minimal folder structure:
```
lib/          → reusable modules
data/srd/     → imported 5e SRD JSON
notebooks/    → Jupyter environments & demos
```

- Removed speculative folders (`sessions`, `notebooks` checks) from runtime validation.
- Added `.gitignore` for Jupyter and environment artifacts.
- Confirmed first major commit including SRD data, libraries, and demo notebooks.

**Key Learning:**  
Minimal, validated folder checks reduce noise and improve clarity when bootstrapping new environments.

---

## 3. Core Libraries

### lib/dice.py
- Rebuilt the dice parser and roller from scratch:
- Supports composite expressions (`2d8+1d4+3`), keep-highest/lowest (`4d6kh3`), and advantage/disadvantage.
- Produces structured results: `Result(total, detail)`.
- Debugged expression parsing and error handling.
- Learned safe regex parsing and why to validate sign and count positions.

### lib/srd_reader.py
- Added SRD JSON loader supporting both 2014 and 2024 datasets.
- Normalized minimal monster statblock (`statblock.v1` seed version).
- Handles name, abilities, proficiency bonus, saving throws, and one representative attack.

### lib/roll_adapter.py
- Connected normalized monster data to dice rolling.
- Implemented:
- `roll_strength_save()` - preferring explicit STR save or ability modifier.
- `pick_attack()` - selects a representative attack and to-hit bonus.
- `roll_attack()` - executes to-hit and damage rolls.
- Added type-agnostic handling (string vs dict damage representations).

**Key Learning:**  
Designing for flexible, mixed input types avoids brittleness when working with SRD JSON variations.

---

## 4. Data Integration & Provenance
- Imported **official 5e SRD JSON** (2014 and 2024) via sparse-checkout clone from MIT-licensed [5e-bits/5e-database](https://github.com/5e-bits/5e-database).
- Added **OGL 1.0a** and **MIT** licenses to project root for compliance.
- Created `_meta.yaml` provenance file recording:
- Upstream repo, commit SHA, and file list.
- Import timestamp and local license paths.

**Key Learning:**  
Automating provenance documentation is critical for transparency and future content mixing (e.g., OGL + Homebrew).

---

## 5. Demonstration Notebook - IWTC_Tools_Demo.ipynb
- Designed a structured, navigable notebook demonstrating full system functionality:
- Bootstrap -> Dice -> SRD Reader -> Roll Adapter -> Environment Summary
- Added internal anchor links and table-of-contents table for reliable in-notebook navigation.
- Verified all demo workflows:
- Dice roller examples and advantage/disadvantage tests.
- SRD monster load and normalization (Goblin).
- Strength saving throw roll.
- Attack roll using **Shortbow**, including clean damage type formatting (`1d6+2 => ... = 8 (Piercing)`).

**Key Learning:**  
Jupyter notebooks can serve as living documentation when structured with explicit sections, anchors, and concise, runnable demos.

---

## 6. Learning Highlights

| Theme | What Was Learned | Result |
|-------|------------------|---------|
| Pathing & Imports | Why `sys.path` must contain the project root. | Reliable imports across notebooks. |
| Controlled Minimalism | Only validate existing, active directories. | Cleaner bootstrap, less maintenance. |
| Parser Design | Regex rules and composition order matter for clarity. | Robust dice roller foundation. |
| Data Provenance | Track upstream data and licenses explicitly. | Transparent SRD import process. |
| Notebook Architecture | Clear anchors and TOC improve navigation. | Readable, maintainable demos. |
| Progressive Abstraction | Delay new abstractions until patterns stabilize. | Simplified iteration and debugging. |

---

## 7. Next Steps

1. **Enhance `normalize_minimal()`**  
 - Extract clean `damage_type` names (e.g., "Piercing") instead of nested dicts.  
 - Normalize ability modifiers and proficiency data consistently.

2. **Implement `statblock.v1` Schema**  
 - Define JSON Schema for validation and testing of normalized data.

3. **Add Session Logging Prototype**  
 - Record each roll (monster, expression, result, timestamp) to prepare for session summaries.

4. **Introduce Homebrew YAML Loader**  
 - Build editable YAML statblock workflow, keeping SRD JSON immutable.

5. **Explore Agent Integration**  
 - Begin planning for an IWTC Agent capable of querying SRD + Homebrew data for narrative and mechanical tasks.

---

**Current Status:**  
End-to-end SRD -> Normalized Statblock -> Rolling Integration fully operational.  
Environment and architecture are stable; ready for expansion into validation, homebrew, and automation layers.

---
